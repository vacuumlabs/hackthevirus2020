mutation AcceptChallenge($challenge_id: uuid!, $user_id: uuid!) {
  insert_challenge_assignment(
    objects: {
      challenge_id: $challenge_id,
      user_id: $user_id,
    }
  ) {
    affected_rows
  }
}

mutation CompleteChallenge($assignment_id: uuid!, $completed_at: timestamptz!, $mood: mood_enum!, $note: String) {
  update_challenge_assignment(
    where: {
      id: { _eq: $assignment_id }
    }
    _set: {
      completed_at: $completed_at,
      mood: $mood,
      note: $note
    }
  ) {
    affected_rows
  }
}

mutation AddAttachment($assignment_id: uuid!, $attachment: String!) {
  update_challenge_assignment(
    where: { id: { _eq: $assignment_id } }
    _set: { attachment: $attachment }
  ) {
    affected_rows
  }
}

mutation CreateUser($user_id: uuid!, $username: String!) {
  insert_user(
    objects: {
      id: $user_id
      name: $username
    }
  ) {
    affected_rows
  }
}